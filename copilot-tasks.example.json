{
  "version": "1.0",
  "description": "Example task definitions for Copilot headless runner",
  "tasks": {
    "swift-syntax-check": {
      "name": "Swift Syntax Check",
      "prompt": "Check all Swift files in Catbird/ directory for syntax errors using swift -frontend -parse",
      "approval": "--allow-tool 'shell(swift)'",
      "timeout": 60
    },
    "build-ios": {
      "name": "iOS Build",
      "prompt": "Build Catbird for iOS simulator (iPhone 16 Pro) using xcodebuild",
      "approval": "--allow-tool 'shell(xcodebuild)'",
      "timeout": 300
    },
    "build-macos": {
      "name": "macOS Build",
      "prompt": "Build Catbird for macOS using xcodebuild",
      "approval": "--allow-tool 'shell(xcodebuild)'",
      "timeout": 300
    },
    "run-tests": {
      "name": "Run Tests",
      "prompt": "Run all Swift tests for the Catbird project",
      "approval": "--allow-all-tools",
      "timeout": 180
    },
    "swiftlint": {
      "name": "SwiftLint",
      "prompt": "Run SwiftLint on the entire project and report issues",
      "approval": "--allow-tool 'shell(swiftlint)'",
      "timeout": 60
    },
    "git-status": {
      "name": "Git Status",
      "prompt": "Show git status and list any uncommitted changes",
      "approval": "--allow-tool 'shell(git)'",
      "timeout": 10
    }
  },
  "workflows": {
    "pre-commit": {
      "description": "Run before committing code",
      "mode": "sequential",
      "tasks": ["swift-syntax-check", "swiftlint", "git-status"]
    },
    "full-build": {
      "description": "Build for all platforms",
      "mode": "parallel",
      "tasks": ["build-ios", "build-macos"]
    },
    "ci-pipeline": {
      "description": "Continuous integration pipeline",
      "mode": "sequential",
      "tasks": ["swift-syntax-check", "build-ios", "run-tests"]
    }
  }
}
